<div class="container-principal">
  <div class="cabecalho-pagina">
    <h1>Lista de Pagamentos</h1>
  </div>

  <div class="barra-filtros">
    <mat-form-field appearance="outline" class="filtro-busca">
      <mat-label>Buscar por identificação, método de pagamento...</mat-label>
      <input matInput>
    </mat-form-field>

    <mat-form-field appearance="outline" class="filtro-status">
      <mat-label>Todos</mat-label>
      <mat-select>
        <mat-option value="todos">Todos</mat-option>
        <mat-option value="sucesso">Processado com sucesso</mat-option>
        <mat-option value="pendente">Pendente de Processamento</mat-option>
        <mat-option value="falha">Processado com falha</mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-flat-button color="primary" class="botao-novo-pagamento">
      <mat-icon>note_add</mat-icon>
      Novo Pagamento
    </button>
  </div>

  <div class="tabela-container">
    <table mat-table [dataSource]="dadosPagamentos" class="tabela-pagamentos">

      <ng-container matColumnDef="identificacao">
        <th mat-header-cell *matHeaderCellDef> Identificação </th>
        <td mat-cell *matCellDef="let pagamento"> {{ pagamento.identificacao }} </td>
      </ng-container>

      <ng-container matColumnDef="metodoPagamento">
        <th mat-header-cell *matHeaderCellDef> Método de pagamento </th>
        <td mat-cell *matCellDef="let pagamento"> {{ pagamento.metodoPagamento }} </td>
      </ng-container>

      <ng-container matColumnDef="valor">
        <th mat-header-cell *matHeaderCellDef> Valor </th>
        <td mat-cell *matCellDef="let pagamento"> R$ {{ pagamento.valor | number:'1.2-2' }} </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> Status </th>
        <td mat-cell *matCellDef="let pagamento">
          <span class="status-pagamento" [ngClass]="{
            'sucesso': pagamento.status === 'Processado com sucesso',
            'pendente': pagamento.status === 'Pendente de Processamento',
            'falha': pagamento.status === 'Processado com falha'
          }">
            {{ pagamento.status }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="acoes">
        <th mat-header-cell *matHeaderCellDef> Ações </th>
        <td mat-cell *matCellDef="let pagamento">
          <button
            mat-flat-button
            class="botao-acao"
            [disabled]="pagamento.status === 'Processado com sucesso' || pagamento.status === 'Pendente de Processamento'"
            (click)="inativarPagamento(pagamento.identificacao)"
             [ngClass]="pagamento.status === 'Processado com falha' ? 'botao-inativar' : 'botao-inativar-desabled'"

          >
            Inativar
          </button>
          <button
            mat-flat-button
            color="primary"
            class="botao-acao"
            [disabled]="pagamento.status !== 'Pendente de Processamento'"
            (click)="processarPagamento(pagamento.identificacao)"
          >
            Processar
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="colunasExibidas"></tr>
      <tr mat-row *matRowDef="let row; columns: colunasExibidas;"></tr>
    </table>
  </div>

  <div class="rodape-tabela">
    <mat-paginator
    [length]="totalDeItens"
    [pageSize]="tamanhoDaPagina"
    [pageIndex]="indiceDaPagina"
    [pageSizeOptions]="[5, 10, 25, 100]"

    (page)="mudancaPagina($event)"
    aria-label="Selecione a página de pagamentos"
  >
  </mat-paginator>
  </div>
</div>
